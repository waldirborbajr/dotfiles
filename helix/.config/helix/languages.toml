####################################################################################################
# GO — indentação com 2 espaços (não idiomático, mas consistente globalmente)
####################################################################################################

[language-server.gopls]
command = "gopls"
indent = { tab-width = 2, unit = "  " }     # ALTERADO: 2 espaços, sem tab

[[language]]
name = "go"
scope = "source.go"
injection-regex = "go"
file-types = ["go"]
roots = ["go.work", "go.mod"]

auto-format = true
formatter = { command = "goimports" }

comment-token = "//"
block-comment-tokens = { start = "/*", end = "*/" }

language-servers = ["gopls", "golangci-lint-lsp"]

indent = { tab-width = 2, unit = "  " }     # ALTERADO: força 2 espaços no editor

persistent-diagnostic-sources = ["gopls"]

####################################################################################################
# RUST — já idiomático com 2 espaços (mantido)
####################################################################################################

[[language]]
name = "rust"
scope = "source.rust"
injection-regex = "rs|rust"
file-types = ["rs"]
roots = ["Cargo.toml", "Cargo.lock"]

auto-format = true
comment-tokens = ["//", "///", "//!"]

block-comment-tokens = [
  { start = "/*", end = "*/" },
  { start = "/**", end = "*/" },
  { start = "/*!", end = "*/" }
]

language-servers = ["rust-analyzer"]

indent = { tab-width = 2, unit = "  " }     # CONFIRMADO: 2 espaços, sem tab

persistent-diagnostic-sources = ["rustc", "clippy"]

####################################################################################################
# MARKDOWN — 2 espaços (mantido)
####################################################################################################

[[language]]
name = "markdown"
scope = "source.md"
injection-regex = "md|markdown"
file-types = ["md"]
roots = []

indent = { tab-width = 2, unit = "  " }     # CONFIRMADO: padrão Markdown

auto-format = false
language-servers = []

####################################################################################################
# NIX — 2 espaços, alinhado ao alejandra
####################################################################################################

[language-server.nixd]
command = "nixd"

[language-server.nixd.config]
formatting.command = ["alejandra"]
diagnostics.suppress = ["sema-escaping"]
options.enable = true

[[language]]
name = "nix"
scope = "source.nix"
injection-regex = "nix"
file-types = ["nix"]
roots = ["flake.nix", "shell.nix", "default.nix"]

auto-format = true
formatter = { command = "alejandra" }

comment-token = "#"

language-servers = ["nixd"]

indent = { tab-width = 2, unit = "  " }     # CONFIRMADO: 2 espaços, sem tab
