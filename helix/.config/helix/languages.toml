####################################################################################################
# GO — padrão oficial: TAB com largura 4
####################################################################################################

[language-server.gopls]
command = "gopls"
indent = { tab-width = 4, unit = "\t" }     # ALTERADO: volta para TAB com largura 4

[[language]]
name = "go"
scope = "source.go"
injection-regex = "go"
file-types = ["go"]
roots = ["go.work", "go.mod"]

auto-format = true
formatter = { command = "goimports" }

comment-token = "//"
block-comment-tokens = { start = "/*", end = "*/" }

language-servers = ["gopls", "golangci-lint-lsp"]

indent = { tab-width = 4, unit = "\t" }     # ALTERADO: editor alinhado ao gofmt

persistent-diagnostic-sources = ["gopls"]

####################################################################################################
# RUST — padrão idiomático: TAB com largura 4
####################################################################################################

[[language]]
name = "rust"
scope = "source.rust"
injection-regex = "rs|rust"
file-types = ["rs"]
roots = ["Cargo.toml", "Cargo.lock"]

auto-format = true
comment-tokens = ["//", "///", "//!"]

block-comment-tokens = [
  { start = "/*", end = "*/" },
  { start = "/**", end = "*/" },
  { start = "/*!", end = "*/" }
]

language-servers = ["rust-analyzer"]

indent = { tab-width = 4, unit = "\t" }     # ALTERADO: volta para TAB/4 (rustfmt aceita)

persistent-diagnostic-sources = ["rustc", "clippy"]

####################################################################################################
# MARKDOWN — mantido simples (espaços não fazem diferença sem auto-format)
####################################################################################################

[[language]]
name = "markdown"
scope = "source.md"
injection-regex = "md|markdown"
file-types = ["md"]
roots = []

indent = { tab-width = 4, unit = "\t" }     # ALTERADO: consistência global

auto-format = false
language-servers = []

####################################################################################################
# NIX — alinhado ao padrão geral (formatter decide)
####################################################################################################

[language-server.nixd]
command = "nixd"

[language-server.nixd.config]
formatting.command = ["alejandra"]
diagnostics.suppress = ["sema-escaping"]
options.enable = true

[[language]]
name = "nix"
scope = "source.nix"
injection-regex = "nix"
file-types = ["nix"]
roots = ["flake.nix", "shell.nix", "default.nix"]

auto-format = true
formatter = { command = "alejandra" }

comment-token = "#"

language-servers = ["nixd"]

indent = { tab-width = 4, unit = "\t" }     # ALTERADO: TAB com largura 4
